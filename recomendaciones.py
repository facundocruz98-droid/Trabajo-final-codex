# recomendaciones.py
# ============================================================
#  MÓDULO DE RECOMENDACIONES PERSONALIZADAS (Conversacionales)
# ============================================================

recomendaciones_personales = {
    "A": (
        "Trata de dedicar al menos una hora diaria a cada materia importante. No hace falta que lo hagas todo junto: "
        "podés repartirlo entre mañana, tarde o noche según cuándo te sientas más despejado. "
        "Lo importante es mantener ese pequeño hábito todos los días. Esa hora constante te ayuda a no atrasarte, "
        "a entender mejor los temas y a llegar más tranquilo a los parciales."
    ),

    "B": (
        "Trata de avanzar al ritmo de la materia para que no se te acumule todo. "
        "Cada clase suma, y si vas repasando lo que ves semana a semana, llegas a los parciales mucho más tranquilo. "
        "Hacé un repaso corto después de cada clase: 10 o 15 minutos alcanzan para fijar lo más importante y evitar atrasarte."
    ),

    "C": (
        "Si podés, rendí los finales apenas termina la cursada. "
        "Tenés todos los temas fresquitos y necesitás mucho menos esfuerzo para estudiar. "
        "Además, te evitás acumular finales más adelante, cuando cuesta retomar y se hace todo más pesado."
    ),

    "D": (
        "Si una materia se puede promocionar, tratá de aprovecharlo. "
        "Estudiar un poco todas las semanas y cumplir con los parciales te puede ahorrar rendir un final entero más adelante. "
        "Además, cuando promocionás una materia, sentís que avanzás más rápido y te sacás un peso enorme de encima."
    ),

    "E": (
        "Ir a clase y tomar apuntes propios te da una ventaja enorme. "
        "Muchas veces los profes explican qué temas son clave, cuáles suelen tomar en parciales o finales, "
        "e incluso aclaran errores de sus propias diapositivas. "
        "Si faltás, te perdés esas aclaraciones importantes y estudiar solo desde las diapos te puede jugar en contra. "
        "Anotá todo lo que el profe recalca, explica o corrige: esos detalles después marcan la diferencia."
    ),

    "F": (
        "Establecer un tiempo fijo para cada materia te ordena muchísimo. "
        "Puede ser media hora, una hora o lo que tengas, pero lo importante es que sea constante. "
        "Cuando sabés que todos los días le dedicás ese ratito a cada materia, evitás atrasarte, "
        "estudiás más relajado y llegás a los parciales con todo más fresquito."
    ),

    "G": (
        "Si estás trabajando en doble turno, es clave organizar bien tus tiempos para no agotarte. "
        "Elegí horarios de cursada donde estés más despierto y repartí el estudio en bloques cortitos para no saturarte. "
        "No te exijas como alguien que tiene todo el día libre: ajustá tu ritmo a tu realidad. "
        "Con buena organización podés avanzar sin quemarte, incluso con un trabajo pesado."
    ),

    "I": (
        "A veces la carrera puede sentirse larga o pesada, pero no olvides por qué empezaste ni lo lejos que ya llegaste. "
        "Avanzá a tu propio ritmo y no te compares con los demás: cada persona aprende distinto. "
        "Buscá apoyo en compañeros avanzados, parciales viejos o material extra cuando algo se te haga difícil. "
        "Y sobre todo: seguí aunque sea de a poquito. Cada avance suma."
    ),

    "L": (
        "Aquí te muestro las materias que se dictan a la mañana para que puedas organizar mejor tu cursada."
    ),

    "M": (
        "Si tenés poco tiempo por el trabajo o te cuesta llegar a la facultad, aprovechar las clases virtuales te puede salvar. "
        "Te permiten organizarte mejor, avanzar a tu ritmo y no perder contenido. "
        "Además podés pausar o volver a ver explicaciones cuando algo no te quede claro."
    ),

    "N": (
        "Aquí te muestro las materias que se dictan a la tarde para que puedas organizar mejor tu cursada."
    ),

    "R": (
        "Hacer un curso nivelatorio antes de empezar el año te puede ayudar muchísimo si venís flojo en algún tema. "
        "Te sirve para recuperar bases, entender mejor las materias del primer año y arrancar el cuatrimestre con más seguridad. "
        "No es tiempo perdido: al contrario, te ahorra problemas después."
    ),
    "S":(
        "Si alguna materia se te hace difícil o no terminás de entender ciertos temas, un tutor académico puede ayudarte un montón."
        "Te explica con calma, responde tus dudas y te acompaña para que no te atrases."
        "Además, te ayuda a estudiar mejor y a ordenar tus tiempos. Es una forma práctica de mejorar tu cursada."
    ),
    "V":(
        "Asistir a las clases presenciales te ayuda a entender mejor los temas y a mantener un ritmo de estudio más ordenado."
        "Estar en el aula permite hacer preguntas en el momento, participar, y aprovechar las explicaciones del profe en vivo."
        "Además, te mantiene conectado con tus compañeros y eso hace que estudiar sea mucho más fácil y llevadero"
    ),
    "AA":(
        "Evitar que tus materias se superpongan es clave para cursar sin estrés."
        "Cuando organizás bien tu horario, podés asistir a todas tus clases, seguir el ritmo de cada materia y no perder contenido importante."
        "Además, te ayuda a estudiar más tranquilo y a tener un cuatrimestre mucho mejor organizado."
        ),
    "X":(
        "Hacer mapas conceptuales es una forma muy práctica de ordenar las ideas cuando una materia tiene muchos temas o se te mezclan los conceptos."
        "Te ayuda a ver todo más claro, entender cómo se relacionan los contenidos y estudiar más rápido."
        "Además, sirve mucho para repasar antes de un examen porque tenés toda la información importante en un solo vistazo."
        ),
    "T":(
        "Prestarle especial atención a las materias troncales es fundamental, porque son la base de toda la carrera."
        "Si las llevás al día, después se te hace mucho más fácil entender los contenidos de los años siguientes."
        "Organizá bien tu tiempo, buscá apoyo si lo necesitás y tratá de no dejarlas para último momento: dominarlas te da seguridad para avanzar"
        ),
    "U":(
        "Aprovechar esos ratos libres para adelantar un poco las materias te ayuda muchísimo a no acumular todo a último momento."
        "Aunque sea leer un resumen, ver una clase o resolver un par de ejercicios, suma un montón."
        "Es una forma simple de mantenerte al día y reducir el estrés cuando llegan parciales y entregas."

        ),
    "EE":(
        "Si estás entre dos carreras o todavía no tenés del todo definida tu elección, cursar primero las materias comunes es una estrategia muy útil."
        "Te permite avanzar sin arriesgarte, ahorrar tiempo y evitar cursadas repetidas más adelante."
        "Además, te da un panorama real de lo que vas a estudiar y te ayuda a decidir con más seguridad."

        ),
    "CC":(
        "Tomarte un rato para actividades recreativas no es perder tiempo: es recargar energía."
        "Hacer algo que te gusta —salir, escuchar música, hacer deporte o simplemente descansar— te ayuda a bajar el estrés y volver a estudiar con la cabeza más fresca."
        "Cuando equilibrás estudio y ocio, rendís mejor y llegás al final del cuatrimestre con menos agotamiento"

        ),
    "KK":(
        "Organizar bien tu cursada es clave para no sentirte abrumado durante el cuatrimestre."
        "Armar un calendario con tus clases, fechas de parciales y tiempos de estudio te ayuda a mantener todo bajo control y evitar atrasos."
        "Cuando tenés claro qué hacer y cuándo, estudiás con menos estrés y podés aprovechar mejor tu tiempo."
        ),
    "II":(
        "El estrés académico es normal, pero no tenés que cargarlo solo."
        "Tomarte pequeños descansos, ordenar tus tiempos y hablar con alguien cuando te sentís saturado puede ayudarte un montón."
        "Recordá que avanzar de a poco también es avanzar: cuidarte es parte del estudio y te permite rendir mejor sin agotarte."

        ),
    "JJ":(
        "Siempre que puedas, elegí cursar en el horario en el que te sentís más descansado y atento."
        "Cuando estudiás con la mente fresca, entendés mejor, retenés más y necesitás menos tiempo para repasar después."
        "Aprovechar tus mejores horas del día hace que la cursada sea más llevadera y que rindas mucho mejor."

        ),
    "MM":(
        "Tener un plan de estudio diario te ayuda a avanzar un poco cada día sin sentirte abrumado."
        "Organizar lo que vas a hacer —aunque sea leer un tema, repasar apuntes o resolver algunos ejercicios— hace que mantengas el ritmo y no se te junte todo al final."
        "Con un plan claro, estudiás más tranquilo y llegás mejor preparado a parciales y finales."

        ),
    "NN":(
        "Si estás cursando más de una carrera o evaluando alternativas, es importante que priorices la que realmente querés seguir."
        "Enfocarte primero en tu carrera principal te ayuda a organizar mejor tu tiempo, evitar atrasos y avanzar de forma más ordenada."
        "Cuando tenés claro cuál es tu prioridad, estudiás con más tranquilidad y tus esfuerzos dan mejores resultados."

        ),
    "OO":(
        "Usar Google Calendar puede hacerte la cursada mucho más simple."
        "Podés anotar tus clases, parciales, trabajos prácticos y recordatorios, así no se te pasa nada y mantenés todo bien ordenado."
        "Además, te permite ver tu semana de un vistazo y organizar tus tiempos sin estrés. Es una herramienta fácil que te ayuda a estudiar mejor."
       
    )
}


def generar_recomendaciones_conversacionales(finales, hechos_usuario):
    """
    Genera una lista de mensajes personalizados según:
    - Hechos finales inferidos por el sistema (finales) : iterable (set/list) de códigos de hechos
    - Hechos declarados explícitamente por el usuario (hechos_usuario) : set de hechos declarados
    """
    mensajes = []
    turnos_desc = {
        "AC": "mañana",
        "AD": "tarde",
        "AE": "noche",
    }

    # Detectar en qué turno trabaja el usuario (si corresponde)
    turno_trabajo = next((t for t in turnos_desc if t in hechos_usuario), None)

    # ------------------------------------------------------------
    # Recomendaciones según TURNOS
    # ------------------------------------------------------------
    if turno_trabajo:
        mensajes.append(
            (
                "Veo que trabajás por la {0}. Puedo ofrecerte las siguientes recomendaciones para facilitar tu cursada universitaria:"
            ).format(turnos_desc[turno_trabajo])
        )
    else:
        mensajes.append(
            "Como tu principal foco es el estudio, Puedo ofrecerte las siguientes recomendaciones para facilitar tu cursada universitaria:"
        )

    # ------------------------------------------------------------
    # Recomendaciones sedun los Hechos Finales o Inferidos
    # ------------------------------------------------------------
  
    for codigo in finales:
      if codigo in recomendaciones_personales:
         mensajes.append(recomendaciones_personales[codigo])

    return mensajes


def imprimir_recomendaciones_conversacionales(finales, hechos_usuario, solo_devolver=False):
    """
    Imprime recomendaciones personalizadas basada en hechos inferidos
    y hechos declarados por el usuario.

    Parámetros:
    - finales: iterable con códigos de hechos finales (por ejemplo set o list)
    - hechos_usuario: set con hechos declarados por el usuario (ej. {'AC','AG'})
    - solo_devolver: si True, NO imprime y devuelve lista; si False (por defecto) imprime y devuelve lista.
    """
    mensajes = generar_recomendaciones_conversacionales(finales, hechos_usuario)
    

    if not solo_devolver:
        print("\n=== RECOMENDACIONES PERSONALIZADAS ===")
        for mensaje in mensajes:
            print(f"• {mensaje}")

    return mensajes

